{% extends "main/base.html" %}
{% block content %}
<div class="plant-form-container">
    {% if request.user.is_staff %}
        <h1>
            {% if form.instance.pk %}
                Edit Plant
            {% else %}
                Add New Plant
            {% endif %}
        </h1>

        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            
            {% for field in form %}
                {% if field.name == 'is_edible' or field.name == 'is_published' %}
                    <!-- Checkboxes في نفس السطر مع الـ label -->
                    <div class="form-field">
                        <label style="flex-direction: row; align-items: center;">
                            {{ field }}
                            {{ field.label }}
                        </label>
                        {% if field.errors %}
                            <span>{{ field.errors }}</span>
                        {% endif %}
                    </div>
                {% else %}
                    <!-- باقي الحقول عادي -->
                    <div class="form-field">
                        {{ field.label_tag }}
                        {{ field }}
                        {% if field.errors %}
                            <span>{{ field.errors }}</span>
                        {% endif %}
                    </div>
                {% endif %}
            {% endfor %}
            
            <button type="submit" class="book-btn">Save Plant</button>
        </form>
    {% else %}
        <p style="text-align: center; color: #e74c3c;">You are not authorized to add or edit plants.</p>
    {% endif %}

    <a href="{% url 'plants_list' %}" class="back-link">← Back to Plant List</a>
</div>
{% endblock %}